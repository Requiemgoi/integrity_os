# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: Swagger UI (http://localhost:8000/docs)

## –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

**http://localhost:8000/docs** - —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger UI), —Å–æ–∑–¥–∞–Ω–Ω–∞—è FastAPI. –≠—Ç–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ endpoints API –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

---

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ?

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**

FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥ –∏ —Å–æ–∑–¥–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –§—É–Ω–∫—Ü–∏–π —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏ `@router.get()`, `@router.post()`, etc.
- –ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
- –ú–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö (Pydantic models)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∫–æ–¥–µ (docstrings)

### 2. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ endpoints API
- –ú–µ—Ç–æ–¥—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (GET, POST, etc.)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (—Å—Ö–µ–º—ã)
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
- –ù–∞–∑–≤–∞–Ω–∏–µ: "IntegrityOS API"
- –í–µ—Ä—Å–∏—è: "1.0.0"
- –û–ø–∏—Å–∞–Ω–∏–µ: "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å—é —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–µ—Ñ–µ–∫—Ç–æ–≤"

**–ö–Ω–æ–ø–∫–∏:**
- **Authorize** - –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞)
- **Schemas** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å

–†–∞–∑–¥–µ–ª—ã (tags) —Å endpoints:

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** (`/api/auth`)
2. **–°–µ–Ω—Å–æ—Ä—ã** (`/api/sensors`)
3. **–î–∞—à–±–æ—Ä–¥** (`/api/dashboard`)
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** (`/api/analytics`)

---

## –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)

#### POST `/api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
```json
{
  "username": "string",    // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  "email": "string",       // Email –∞–¥—Ä–µ—Å
  "password": "string"     // –ü–∞—Ä–æ–ª—å
}
```

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "—Ç–æ–∫–µ–Ω_–¥–æ—Å—Ç—É–ø–∞",
  "token_type": "bearer"
}
```

---

#### POST `/api/auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **username** (form data): –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **password** (form data): –ü–∞—Ä–æ–ª—å

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞

**–ü—Ä–∏–º–µ—Ä:**
- username: `admin`
- password: `admin123`

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "—Ç–æ–∫–µ–Ω_–¥–æ—Å—Ç—É–ø–∞",
  "token_type": "bearer"
}
```

---

#### GET `/api/auth/me` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:** –ù–∏—á–µ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –ù—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è (–ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `/login`)

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "username": "admin",
  "email": "admin@integrityos.kz",
  "is_active": true
}
```

---

### 2. –°–µ–Ω—Å–æ—Ä—ã (`/api/sensors`)

#### GET `/api/sensors/types` - –¢–∏–ø—ã —Å–µ–Ω—Å–æ—Ä–æ–≤

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:** –ù–∏—á–µ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–µ–Ω—Å–æ—Ä–æ–≤

**–û—Ç–≤–µ—Ç:**
```json
{
  "sensor_types": [
    "raw_material",
    "production_line",
    "warehouse"
  ]
}
```

---

#### GET `/api/sensors/{sensor_type}/data` - –î–∞–Ω–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä–æ–≤

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **sensor_type** (path parameter): –¢–∏–ø —Å–µ–Ω—Å–æ—Ä–∞
  - `raw_material` - –°—ã—Ä—å–µ
  - `production_line` - –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏–Ω–∏—è
  - `warehouse` - –°–∫–ª–∞–¥
- **hours** (query parameter, optional): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 24)
- **limit** (query parameter, optional): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä–æ–≤ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/sensors/raw_material/data?hours=24&limit=500
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 1,
    "sensor_id": "sensor_001",
    "sensor_type": "raw_material",
    "parameter": "temperature",
    "value": 20.5,
    "unit": "¬∞C",
    "timestamp": "2024-01-01T12:00:00",
    "is_anomaly": false
  },
  // ...
]
```

---

#### GET `/api/sensors/{sensor_type}/latest` - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **sensor_type** (path parameter): –¢–∏–ø —Å–µ–Ω—Å–æ—Ä–∞

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Å–µ–Ω—Å–æ—Ä–∞

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/sensors/raw_material/latest
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 1,
    "sensor_id": "sensor_001",
    "sensor_type": "raw_material",
    "parameter": "temperature",
    "value": 20.5,
    "unit": "¬∞C",
    "timestamp": "2024-01-01T12:00:00",
    "is_anomaly": false
  },
  // ...
]
```

---

#### POST `/api/sensors/{sensor_type}/simulate` - –°–∏–º—É–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **sensor_type** (path parameter): –¢–∏–ø —Å–µ–Ω—Å–æ—Ä–∞

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –í—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
POST /api/sensors/raw_material/simulate
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ 4 —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö",
  "data_points": 4,
  "alerts_generated": 0
}
```

---

### 3. –î–∞—à–±–æ—Ä–¥ (`/api/dashboard`)

#### GET `/api/dashboard/kpis` - KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:** –ù–∏—á–µ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (KPI)

**–û—Ç–≤–µ—Ç:**
```json
{
  "kpis": [
    {
      "id": 1,
      "kpi_name": "OEE",
      "sensor_type": "production_line",
      "value": 85.5,
      "target": 90.0,
      "unit": "%",
      "timestamp": "2024-01-01T12:00:00"
    },
    // ...
  ]
}
```

---

#### GET `/api/dashboard/alerts` - –û–ø–æ–≤–µ—â–µ–Ω–∏—è

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **limit** (query parameter, optional): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–µ—Ä—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/dashboard/alerts?limit=20
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "alerts": [
    {
      "id": 1,
      "sensor_id": "sensor_001",
      "sensor_type": "raw_material",
      "alert_type": "threshold",
      "severity": "high",
      "message": "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ",
      "value": 30.5,
      "created_at": "2024-01-01T12:00:00"
    },
    // ...
  ]
}
```

---

#### GET `/api/dashboard/summary` - –°–≤–æ–¥–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:** –ù–∏—á–µ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º —Ç–∏–ø–∞–º —Å–µ–Ω—Å–æ—Ä–æ–≤

**–û—Ç–≤–µ—Ç:**
```json
{
  "raw_material": {
    "sensor_count": 4,
    "recent_data_points": 120,
    "active_alerts": 2,
    "latest_data": [
      {
        "parameter": "temperature",
        "value": 20.5,
        "unit": "¬∞C",
        "timestamp": "2024-01-01T12:00:00"
      },
      // ...
    ]
  },
  "production_line": { /* ... */ },
  "warehouse": { /* ... */ }
}
```

---

#### POST `/api/dashboard/kpis/generate` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è KPI

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:** –ù–∏—á–µ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –í—Ä—É—á–Ω—É—é —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è KPI (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ 3 KPI",
  "kpis": 3
}
```

---

### 4. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`/api/analytics`)

#### GET `/api/analytics/forecast/{sensor_id}` - –ü—Ä–æ–≥–Ω–æ–∑

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **sensor_id** (path parameter): ID —Å–µ–Ω—Å–æ—Ä–∞
- **days_ahead** (query parameter, optional): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –∑–∞–ø–∞—Å–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ–Ω—Å–æ—Ä–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç ML)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/analytics/forecast/sensor_001?days_ahead=7
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "sensor_id": "sensor_001",
  "forecast_date": "2024-01-08",
  "predicted_shortage": false,
  "confidence": 0.85
}
```

---

#### GET `/api/analytics/anomalies/{sensor_id}` - –ê–Ω–æ–º–∞–ª–∏–∏

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **sensor_id** (path parameter): ID —Å–µ–Ω—Å–æ—Ä–∞
- **hours** (query parameter, optional): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 24)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ ML-–∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –¥–ª—è —Å–µ–Ω—Å–æ—Ä–∞

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/analytics/anomalies/sensor_001?hours=24
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "anomalies": [
    {
      "timestamp": "2024-01-01T12:00:00",
      "value": 30.5,
      "parameter": "temperature",
      "score": 0.95
    },
    // ...
  ],
  "count": 2
}
```

---

#### GET `/api/analytics/export/csv` - –≠–∫—Å–ø–æ—Ä—Ç CSV

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
- **sensor_type** (query parameter, optional): –¢–∏–ø —Å–µ–Ω—Å–æ—Ä–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω - –≤—Å–µ —Ç–∏–ø—ã)
- **hours** (query parameter, optional): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 24)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä–æ–≤ –≤ CSV —Ñ–∞–π–ª

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/analytics/export/csv?sensor_type=raw_material&hours=24
```

**–û—Ç–≤–µ—Ç:** CSV —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

---

#### GET `/api/analytics/export/pdf` - –≠–∫—Å–ø–æ—Ä—Ç PDF

**–ß—Ç–æ –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:** –ù–∏—á–µ–≥–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:** –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–¥–∫—É –¥–∞—à–±–æ—Ä–¥–∞ –≤ PDF –æ—Ç—á–µ—Ç

**–û—Ç–≤–µ—Ç:** PDF —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Swagger UI

### –®–∞–≥ 1: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ **POST `/api/auth/login`**
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Try it out"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **username**: `admin`
   - **password**: `admin123`
5. –ù–∞–∂–º–∏—Ç–µ **"Execute"**
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **access_token** –∏–∑ –æ—Ç–≤–µ—Ç–∞
7. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Authorize"** –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
8. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω`
9. –ù–∞–∂–º–∏—Ç–µ **"Authorize"**

–¢–µ–ø–µ—Ä—å –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –∏ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ endpoints!

---

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ endpoints

1. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π endpoint (–Ω–∞–ø—Ä–∏–º–µ—Ä, **GET `/api/dashboard/kpis`**)
2. –ù–∞–∂–º–∏—Ç–µ **"Try it out"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
4. –ù–∞–∂–º–∏—Ç–µ **"Execute"**
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç:
   - **Response body** - –¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞
   - **Response headers** - –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
   - **Status code** - –∫–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ (200 = —É—Å–ø–µ—à–Ω–æ)

---

### –®–∞–≥ 3: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Schemas"** –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é —Å—Ö–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SensorDataResponse`)
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏

---

## –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ —ç—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞?

### 1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö endpoints
- –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å endpoints –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ù–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –í–∏–¥–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É

### 3. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**
- –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–∂–∏–¥–∞–µ—Ç API
- –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç API
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤–æ frontend

### 4. **–û—Ç–ª–∞–¥–∫–∞**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ API
- –£–≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫–∏ –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

### 5. **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è**
- –ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API –∫–ª–∏–µ–Ω—Ç–∞–º
- –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –û–±—ä—è—Å–Ω–∏—Ç—å, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ endpoints —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ:

1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `/api/auth/login`
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **"Authorize"** –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –í–≤–µ—Å—Ç–∏ —Ç–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω`

–ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ endpoints –≤–µ—Ä–Ω—É—Ç –æ—à–∏–±–∫—É 401 (Unauthorized).

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

- **JSON** - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- **Form data** - –¥–ª—è `/api/auth/login` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞
- **Path parameters** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/sensors/{sensor_type}/data`)
- **Query parameters** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Å–ª–µ `?` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `?hours=24&limit=500`)

### –¢–∏–ø—ã —Å–µ–Ω—Å–æ—Ä–æ–≤

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã —Å–µ–Ω—Å–æ—Ä–æ–≤:
- `raw_material` - –°—ã—Ä—å–µ
- `production_line` - –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏–Ω–∏—è
- `warehouse` - –°–∫–ª–∞–¥

### –û—à–∏–±–∫–∏

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, API –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É —Å –∫–æ–¥–æ–º —Å—Ç–∞—Ç—É—Å–∞:
- **400** - –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- **401** - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω)
- **404** - –ù–µ –Ω–∞–π–¥–µ–Ω–æ (–Ω–µ–≤–µ—Ä–Ω—ã–π endpoint)
- **500** - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä–æ–≤

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å (—Å–º. –≤—ã—à–µ)
2. –û—Ç–∫—Ä–æ–π—Ç–µ **GET `/api/sensors/{sensor_type}/data`**
3. –ù–∞–∂–º–∏—Ç–µ **"Try it out"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **sensor_type**: `raw_material`
   - **hours**: `24`
   - **limit**: `100`
5. –ù–∞–∂–º–∏—Ç–µ **"Execute"**
6. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ **Response body**

### –ü—Ä–∏–º–µ—Ä 2: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
2. –û—Ç–∫—Ä–æ–π—Ç–µ **POST `/api/sensors/{sensor_type}/simulate`**
3. –ù–∞–∂–º–∏—Ç–µ **"Try it out"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **sensor_type**: `production_line`
5. –ù–∞–∂–º–∏—Ç–µ **"Execute"**
6. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ **Response body**

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–∏—Ç—å KPI

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
2. –û—Ç–∫—Ä–æ–π—Ç–µ **GET `/api/dashboard/kpis`**
3. –ù–∞–∂–º–∏—Ç–µ **"Try it out"**
4. –ù–∞–∂–º–∏—Ç–µ **"Execute"**
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ KPI –≤ **Response body**

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ ReDoc:
- **URL**: http://localhost:8000/redoc
- –ë–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
- –ú–µ–Ω—å—à–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°—Ç—Ä–∞–Ω–∏—Ü–∞ **http://localhost:8000/docs** - —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è:
- üìö –ò–∑—É—á–µ–Ω–∏—è API
- üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è endpoints
- üîç –û—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º
- üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- üéØ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –ø–µ—Ä–µ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤–æ frontend –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏!

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: 2024*

